{"version":3,"sources":["addProviders.js"],"names":["Transloadit","require","has","remoteProviders","dropbox","instagram","facebook","onedrive","url","localProviders","webcam","remoteProviderOptionNames","localProviderOptionNames","addRemoteProvider","uppy","name","opts","Provider","providerOptions","companionUrl","COMPANION","companionAllowedHosts","COMPANION_PATTERN","forEach","use","addLocalProvider","addProviders","names","validNames","Object","keys","expectedNameString","sort","map","validName","join","Error","module","exports"],"mappings":";;AAAA,IAAMA,WAAW,GAAGC,OAAO,CAAC,mBAAD,CAA3B;;AACA,IAAMC,GAAG,GAAGD,OAAO,CAAC,6BAAD,CAAnB;;AAEA,IAAME,eAAe,GAAG;AACtBC,EAAAA,OAAO,EAAEH,OAAO,CAAC,eAAD,CADM;AAEtB,kBAAgBA,OAAO,CAAC,oBAAD,CAFD;AAGtBI,EAAAA,SAAS,EAAEJ,OAAO,CAAC,iBAAD,CAHI;AAItBK,EAAAA,QAAQ,EAAEL,OAAO,CAAC,gBAAD,CAJK;AAKtBM,EAAAA,QAAQ,EAAEN,OAAO,CAAC,gBAAD,CALK;AAMtBO,EAAAA,GAAG,EAAEP,OAAO,CAAC,WAAD;AANU,CAAxB;AASA,IAAMQ,cAAc,GAAG;AACrBC,EAAAA,MAAM,EAAET,OAAO,CAAC,cAAD;AADM,CAAvB;AAIA,IAAMU,yBAAyB,GAAG,CAChC,cADgC,EAEhC,uBAFgC,EAGhC,kBAHgC,EAIhC,eAJgC,EAKhC,QALgC,CAAlC,C,CAQA;;AACA,IAAMC,wBAAwB,GAAG,CAC/B,QAD+B,CAAjC;;AAIA,SAASC,iBAAT,CAA4BC,IAA5B,EAAkCC,IAAlC,EAAwCC,IAAxC,EAA8C;AAC5C,MAAMC,QAAQ,GAAGd,eAAe,CAACY,IAAD,CAAhC;AACA,MAAMG,eAAe,GAAG;AACtB;AACAC,IAAAA,YAAY,EAAEnB,WAAW,CAACoB,SAFJ;AAGtBC,IAAAA,qBAAqB,EAAErB,WAAW,CAACsB;AAHb,GAAxB;AAMAX,EAAAA,yBAAyB,CAACY,OAA1B,CAAkC,UAACR,IAAD,EAAU;AAC1C,QAAIb,GAAG,CAACc,IAAD,EAAOD,IAAP,CAAP,EAAqBG,eAAe,CAACH,IAAD,CAAf,GAAwBC,IAAI,CAACD,IAAD,CAA5B;AACtB,GAFD,EAR4C,CAW5C;;AACA,MAAI,OAAOC,IAAI,CAACD,IAAD,CAAX,KAAsB,QAA1B,EAAoC;AAClC,aAAcG,eAAd,EAA+BF,IAAI,CAACD,IAAD,CAAnC;AACD;;AAEDD,EAAAA,IAAI,CAACU,GAAL,CAASP,QAAT,EAAmBC,eAAnB;AACD;;AAED,SAASO,gBAAT,CAA2BX,IAA3B,EAAiCC,IAAjC,EAAuCC,IAAvC,EAA6C;AAC3C,MAAMC,QAAQ,GAAGR,cAAc,CAACM,IAAD,CAA/B;AACA,MAAMG,eAAe,GAAG,EAAxB;AAEAN,EAAAA,wBAAwB,CAACW,OAAzB,CAAiC,UAACR,IAAD,EAAU;AACzC,QAAIb,GAAG,CAACc,IAAD,EAAOD,IAAP,CAAP,EAAqBG,eAAe,CAACH,IAAD,CAAf,GAAwBC,IAAI,CAACD,IAAD,CAA5B;AACtB,GAFD,EAJ2C,CAO3C;;AACA,MAAI,OAAOC,IAAI,CAACD,IAAD,CAAX,KAAsB,QAA1B,EAAoC;AAClC,aAAcG,eAAd,EAA+BF,IAAI,CAACD,IAAD,CAAnC;AACD;;AAEDD,EAAAA,IAAI,CAACU,GAAL,CAASP,QAAT,EAAmBC,eAAnB;AACD;;AAED,SAASQ,YAAT,CAAuBZ,IAAvB,EAA6Ba,KAA7B,EAAoCX,IAApC,EAA+C;AAAA,MAAXA,IAAW;AAAXA,IAAAA,IAAW,GAAJ,EAAI;AAAA;;AAC7CW,EAAAA,KAAK,CAACJ,OAAN,CAAc,UAACR,IAAD,EAAU;AACtB,QAAIb,GAAG,CAACC,eAAD,EAAkBY,IAAlB,CAAP,EAAgC;AAC9BF,MAAAA,iBAAiB,CAACC,IAAD,EAAOC,IAAP,EAAaC,IAAb,CAAjB;AACD,KAFD,MAEO,IAAId,GAAG,CAACO,cAAD,EAAiBM,IAAjB,CAAP,EAA+B;AACpCU,MAAAA,gBAAgB,CAACX,IAAD,EAAOC,IAAP,EAAaC,IAAb,CAAhB;AACD,KAFM,MAEA;AACL,UAAMY,UAAU,aACXC,MAAM,CAACC,IAAP,CAAY3B,eAAZ,CADW,EAEX0B,MAAM,CAACC,IAAP,CAAYrB,cAAZ,CAFW,CAAhB;AAIA,UAAMsB,kBAAkB,GAAGH,UAAU,CAClCI,IADwB,GAExBC,GAFwB,CAEpB,UAACC,SAAD;AAAA,qBAAmBA,SAAnB;AAAA,OAFoB,EAGxBC,IAHwB,CAGnB,IAHmB,CAA3B;AAIA,YAAM,IAAIC,KAAJ,2BAAkCrB,IAAlC,4BAA6DgB,kBAA7D,OAAN;AACD;AACF,GAhBD;AAiBD;;AAEDM,MAAM,CAACC,OAAP,GAAiBZ,YAAjB","sourcesContent":["const Transloadit = require('@uppy/transloadit')\nconst has = require('@uppy/utils/lib/hasProperty')\n\nconst remoteProviders = {\n  dropbox: require('@uppy/dropbox'),\n  'google-drive': require('@uppy/google-drive'),\n  instagram: require('@uppy/instagram'),\n  facebook: require('@uppy/facebook'),\n  onedrive: require('@uppy/onedrive'),\n  url: require('@uppy/url')\n}\n\nconst localProviders = {\n  webcam: require('@uppy/webcam')\n}\n\nconst remoteProviderOptionNames = [\n  'companionUrl',\n  'companionAllowedHosts',\n  'companionHeaders',\n  'serverHeaders',\n  'target'\n]\n\n// No shared options.\nconst localProviderOptionNames = [\n  'target'\n]\n\nfunction addRemoteProvider (uppy, name, opts) {\n  const Provider = remoteProviders[name]\n  const providerOptions = {\n    // Default to the :tl: Companion servers.\n    companionUrl: Transloadit.COMPANION,\n    companionAllowedHosts: Transloadit.COMPANION_PATTERN\n  }\n\n  remoteProviderOptionNames.forEach((name) => {\n    if (has(opts, name)) providerOptions[name] = opts[name]\n  })\n  // Apply overrides for a specific provider plugin.\n  if (typeof opts[name] === 'object') {\n    Object.assign(providerOptions, opts[name])\n  }\n\n  uppy.use(Provider, providerOptions)\n}\n\nfunction addLocalProvider (uppy, name, opts) {\n  const Provider = localProviders[name]\n  const providerOptions = {}\n\n  localProviderOptionNames.forEach((name) => {\n    if (has(opts, name)) providerOptions[name] = opts[name]\n  })\n  // Apply overrides for a specific provider plugin.\n  if (typeof opts[name] === 'object') {\n    Object.assign(providerOptions, opts[name])\n  }\n\n  uppy.use(Provider, providerOptions)\n}\n\nfunction addProviders (uppy, names, opts = {}) {\n  names.forEach((name) => {\n    if (has(remoteProviders, name)) {\n      addRemoteProvider(uppy, name, opts)\n    } else if (has(localProviders, name)) {\n      addLocalProvider(uppy, name, opts)\n    } else {\n      const validNames = [\n        ...Object.keys(remoteProviders),\n        ...Object.keys(localProviders)\n      ]\n      const expectedNameString = validNames\n        .sort()\n        .map((validName) => `'${validName}'`)\n        .join(', ')\n      throw new Error(`Unexpected provider '${name}', expected one of [${expectedNameString}]`)\n    }\n  })\n}\n\nmodule.exports = addProviders\n"]}